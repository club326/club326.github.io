# NSQ维护文档
## 1.NSQ组件简介
NSQ是一个国外的一个致命短连接服务商提供的一个分布式消息队列中间件，具有高性能、高可靠和无单点故障等有点。
NSQ包括nsqlookupd、nsqd、nsqadmin、curl及nsq_to_file;nsqlookupd主要是用来管理拓扑信息，nsqd则主要负责接收和发送消息到客户端，nsqadmin提供了一个查看集群状态和管理的界面，curl主要是用于向指定URL发送网络请求，nsq_to_file主要用户将数据持久化。
### 1.1 nsqd
单个nsqd实例被设计为一次处理多个数据流。 流被称为“主题”，主题具有一个或多个“频道”。 每个频道都收到一个主题的所有消息的副本 。 在实践中，频道映射到消费主题的下游服务。
通过发布到命名主题或通过订阅命名主题上的频道，首次创建主题。 通过订阅命名的频道首次使用频道。主题和频道分别独立的缓存数据，从而防止消费者慢于其他频道的积压（同样适用于主题级别）。频道通常具有连接的多个客户端。 假设所有连接的客户端处于准备好接收消息的状态，每个消息将被传递给随机客户端
[nsqd]: ./nsqd.gif
总的来讲，消息是从主题 - >频道（每个频道接收该主题的所有消息的副本）的多播，但从频道 - >消费者均匀分布（每个消费者接收该频道的一部分消息）
### 1.2 nsqlookupd
Nsqlookupd是NSQ的一个帮助程序，它提供了它提供了一个目录服务，消费者可以在其中查找提供他们想要订阅的主题的nsqd实例的地址。 在配置方面，消费者与生产者分离。
每个nsqd有一个长期的TCP连接，周期性地推送其状态。 该数据用于通知nsqlookupd将向消费者提供哪些nsqd地址。 对于消费者来说，一个HTTP /lookup端点被公开用于轮询。
### 1.3 nsqadmin
它提供了一个Web UI来浏览主题/频道/消费者的层次结构，并检查每个层的深度和其他关键统计信息。 此外，它还支持一些管理命令，例如删除和清空频道（这是一个有用的工具，当通道中的消息可以安全地丢弃以使深度恢复到0时）
### 1.4 其他命令
* nsq_pubsub - 将类似HTTP接口的pubsub公开到NSQ集群中的主题
* nsq_to_file - 将给定主题的所有消息持久写入文件
* nsq_to_http - 对主题到（多个）端点的所有消息执行HTTP请求


